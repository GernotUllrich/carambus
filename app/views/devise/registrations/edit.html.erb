<div class="flex flex-wrap my-4 lg:px-4">

  <div class="w-full lg:w-3/4 lg:p-4">
    <div class="p-4  border border-gray-200 dark:bg-gray-900 dark:border-gray-700 rounded-lg lg:p-10">
      <h1 class="h3 mb-4"><%= t('.title', resource: resource.model_name.human) %></h1>

      <%= form_with(
        model: resource,
        as: resource_name,
        url: registration_path(resource_name),
        method: :put,
        class: "mb-16",
        html: {
          data: {
            controller: "bridge--form",
            action: "turbo:submit-start->bridge--form#submitStart turbo:submit-end->bridge--form#submitEnd"
          }
        }
      ) do |form| %>
        <%= render "error_messages", resource: resource %>
        <div class="flex flex-wrap items-start justify-between">
          <div class="w-full lg:w-1/2">
            <div class="form-group">
              <%= form.label :first_name, "First name" %>
              <%= form.text_field :first_name, autofocus: true, autocomplete: "first_name", placeholder: "Steve", class: "form-control" %>
            </div>
            <div class="form-group">
              <%= form.label :last_name, "Last name" %>
              <%= form.text_field :last_name, autofocus: true, autocomplete: "last_name", placeholder: "Jobs", class: "form-control" %>
            </div>

            <div class="form-group">
              <%= form.label :email %>
              <%= form.email_field :email, autocomplete: "email", placeholder: "you@example.com", class: "form-control" %>
            </div>

            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div class="alert alert-warning mb-4"><%= t('.currently_waiting_confirmation_for_email', email: resource.unconfirmed_email) %></div>
            <% end %>

            <div class="form-group">
              <%= form.label :theme, t('.theme') %>
              <%= form.select :theme,
                           options_for_select(
                             [
                               [t('preferences.system_theme'), 'system'],
                               [t('preferences.dark_theme'), 'dark'],
                               [t('preferences.light_theme'), 'light']
                             ],
                             current_user.preferences['theme']
                           ),
                           {},
                           class: 'form-select' %>
            </div>

            <div class="form-group">
              <%= form.label :locale, t('.language') %>
              <%= form.select :locale,
                           options_for_select(
                             I18n.available_locales.map { |l| [t("locales.#{l}"), l] },
                             current_user.preferences['locale'] || I18n.default_locale
                           ),
                           {},
                           class: 'form-select' %>
            </div>

            <div class="form-group">
              <%= form.label :timezone, t('.timezone') %>
              <%= form.time_zone_select :timezone,
                                     ActiveSupport::TimeZone.all,
                                     default: current_user.preferences['timezone'] || 'Berlin',
                                     class: 'form-select' %>
            </div>
          </div>
        </div>

        <h3 class="mt-6 text-lg font-medium"><%= t('.change_password') %></h3>

        <div class="field">
          <%= form.label :current_password, t('.current_password') %>
          <%= form.password_field :current_password, autocomplete: "current-password", class: 'form-input' %>
        </div>

        <div class="field">
          <%= form.label :password, t('.new_password') %>
          <%= form.password_field :password, autocomplete: "new-password", class: 'form-input' %>
        </div>

        <div class="field">
          <%= form.label :password_confirmation, t('.confirm_new_password') %>
          <%= form.password_field :password_confirmation, autocomplete: "new-password", class: 'form-input' %>
        </div>

        <div class="mt-2 form-group">
          <%= form.button button_text(t('.update'), disable_with: t(".saving")), class: "btn btn-primary", "data-bridge--form-target": "submit", "data-bridge-title": t('.update') %>
        </div>
      <% end %>

      <div class="flex flex-wrap flex-end">
        <div class="flex-1">
          <h3 class="mb-4"><%= t('.cancel_my_account') %></h3>
          <p class="text-sm"><%= t(".cancel_my_account_description") %></p>
          <div class="mt-2">
            <%= button_to t('.cancel_my_account'), registration_path(resource_name),
              method: :delete,
              class: "btn btn-danger btn-outline primary",
              data: {
                controller: "turbo-native--sign-out",
                action: "turbo-native--sign-out#deleteAccount",
                turbo_confirm: t("are_you_sure"),
                turbo_confirm_text: current_user.email,
                turbo_confirm_description: t(".cancel_my_account_confirm_description_html")
              } %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
