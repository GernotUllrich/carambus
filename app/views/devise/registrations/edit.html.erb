<div class="flex flex-wrap my-4 lg:px-4">

  <div class="w-full lg:w-3/4 lg:p-4">
    <div class="p-4  border border-gray-200 dark:bg-gray-900 dark:border-gray-700 rounded-lg lg:p-10">
      <h1 class="h3 mb-4"><%= t('.title', resource: resource.model_name.human) %></h1>

      <%= form_with(
        model: resource,
        as: resource_name,
        url: registration_path(resource_name),
        method: :put,
        class: "mb-16",
        html: {
          data: {
            controller: "bridge--form",
            action: "turbo:submit-start->bridge--form#submitStart turbo:submit-end->bridge--form#submitEnd"
          }
        }
      ) do |form| %>
        <%= render "error_messages", resource: resource %>
        <div class="flex flex-wrap items-start justify-between">
          <div class="w-full lg:w-1/2">
            <div class="form-group">
              <%= form.label :first_name, "First name", class: "text-lg font-medium mb-2 block" %>
              <%= form.text_field :first_name, autofocus: true, autocomplete: "first_name", placeholder: "Steve",
                  class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400" %>
            </div>

            <div class="form-group mt-8">
              <%= form.label :last_name, "Last name", class: "text-lg font-medium mb-2 block" %>
              <%= form.text_field :last_name, autocomplete: "last_name", placeholder: "Jobs",
                  class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400" %>
            </div>

            <div class="form-group mt-8">
              <%= form.label :email, "E-Mail", class: "text-lg font-medium mb-2 block" %>
              <%= form.email_field :email, autocomplete: "email", placeholder: "you@example.com",
                  class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400" %>
            </div>

            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div class="alert alert-warning mb-4"><%= t('.currently_waiting_confirmation_for_email', email: resource.unconfirmed_email) %></div>
            <% end %>

            <div class="form-group mt-12">
              <h2 class="text-xl font-medium mb-8">Erscheinungsbild</h2>
              <div class="grid grid-cols-3 gap-8">
                <div class="group">
                  <%= form.radio_button :theme, 'light', class: "absolute opacity-0" %>
                  <label for="user_theme_light" class="cursor-pointer block">
                    <div class="w-24 h-16 bg-white border-2 border-gray-200 rounded-xl mb-4"></div>
                    <div class="h-[3px] bg-gray-200 group-has-[input:checked]:bg-blue-500"></div>
                    <div class="text-xl mt-4">Hell</div>
                  </label>
                </div>

                <div class="group">
                  <%= form.radio_button :theme, 'dark', class: "absolute opacity-0" %>
                  <label for="user_theme_dark" class="cursor-pointer block">
                    <div class="w-24 h-16 bg-gray-900 border-2 border-gray-600 rounded-xl mb-4"></div>
                    <div class="h-[3px] bg-gray-200 group-has-[input:checked]:bg-blue-500"></div>
                    <div class="text-xl mt-4">Dunkel</div>
                  </label>
                </div>

                <div class="group">
                  <%= form.radio_button :theme, 'system', class: "absolute opacity-0" %>
                  <label for="user_theme_system" class="cursor-pointer block">
                    <div class="w-24 h-16 rounded-xl mb-4 overflow-hidden">
                      <div class="flex h-full">
                        <div class="w-1/2 bg-white border-2 border-r-[1px] border-gray-200"></div>
                        <div class="w-1/2 bg-gray-900 border-2 border-l-[1px] border-gray-600"></div>
                      </div>
                    </div>
                    <div class="h-[3px] bg-gray-200 group-has-[input:checked]:bg-blue-500"></div>
                    <div class="text-xl mt-4">
                      <div>System</div>
                      <div>folgen</div>
                    </div>
                  </label>
                </div>
              </div>
            </div>

            <div class="form-group mt-8">
              <%= form.label :locale, "Sprache", class: "text-lg font-medium mb-2 block" %>
              <%= form.select :locale,
                           options_for_select(
                             I18n.available_locales.map { |l| [t("locales.#{l}"), l] },
                             current_user.preferences['locale'] || I18n.default_locale
                           ),
                           {},
                           class: 'w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white' %>
            </div>

            <div class="form-group mt-8">
              <%= form.label :timezone, "Zeitzone", class: "text-lg font-medium mb-2 block" %>
              <%= form.time_zone_select :timezone,
                                     ActiveSupport::TimeZone.all,
                                     { default: current_user.preferences['timezone'] || 'Berlin' },
                                     class: 'w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white' %>
            </div>
          </div>
        </div>

        <h3 class="mt-12 text-xl font-medium mb-6"><%= t('.change_password') %></h3>

        <div class="form-group mb-4">
          <%= form.label :current_password, t('.current_password'), class: "text-lg font-medium mb-2 block" %>
          <%= form.password_field :current_password, autocomplete: "current-password", 
              class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white" %>
        </div>

        <div class="form-group mb-4">
          <%= form.label :password, t('.new_password'), class: "text-lg font-medium mb-2 block" %>
          <%= form.password_field :password, autocomplete: "new-password", 
              class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white" %>
        </div>

        <div class="form-group mb-4">
          <%= form.label :password_confirmation, t('.confirm_new_password'), class: "text-lg font-medium mb-2 block" %>
          <%= form.password_field :password_confirmation, autocomplete: "new-password", 
              class: "w-full px-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-black dark:text-white" %>
        </div>

        <div class="mt-2 form-group">
          <%= form.button button_text(t('.update'), disable_with: t(".saving")), class: "btn btn-primary", "data-bridge--form-target": "submit", "data-bridge-title": t('.update') %>
        </div>
      <% end %>

      <div class="flex flex-wrap flex-end">
        <div class="flex-1">
          <h3 class="mb-4"><%= t('.cancel_my_account') %></h3>
          <p class="text-sm"><%= t(".cancel_my_account_description") %></p>
          <div class="mt-2">
            <%= button_to t('.cancel_my_account'), registration_path(resource_name),
              method: :delete,
              class: "btn btn-danger btn-outline primary",
              data: {
                controller: "turbo-native--sign-out",
                action: "turbo-native--sign-out#deleteAccount",
                turbo_confirm: t("are_you_sure"),
                turbo_confirm_text: current_user.email,
                turbo_confirm_description: t(".cancel_my_account_confirm_description_html")
              } %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
